<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="HTTP API大全，便捷查询、测试和管理API接口">
    <meta name="keywords" content="HTTP API, 接口文档, 在线测试, RESTful, 请求示例">
    <title>YiWeb - HTTP API大全</title>
    <link rel="stylesheet" href="/views/apis/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" crossorigin="anonymous">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <header class="header-row" role="banner">
            <section class="search-row">
                <form class="search-box" role="search" aria-label="API搜索">
                    <span class="search-logo" aria-hidden="true" @click="openLink('/index.html')">
                        <i class="fas fa-network-wired" aria-label="API图标"></i>
                    </span>
                    <div class="search-input-wrapper">
                        <label for="messageInput" class="visually-hidden">消息输入框</label>
                        <textarea 
                            id="messageInput" 
                            placeholder="搜索API名称、路径或描述..." 
                            rows="1" 
                            maxlength="2000"
                            aria-label="搜索API"
                            autocomplete="off"
                            spellcheck="false"
                            :value="searchKeyword"
                            @input="handleSearchInput"
                            @keydown="handleSearchKeydown"></textarea>
                        <div v-if="hasSearchKeyword" class="search-indicator">
                            <button type="button" class="clear-search-btn" @click="clearSearch" aria-label="清空搜索">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </form>
                <nav class="category-filters" id="category-filters" role="toolbar" aria-label="API分组过滤器">
                    <ul class="filter-buttons">
                        <li v-for="btn in filterBtns" :key="btn.id">
                            <button 
                                class="filter-btn" 
                                :class="{ active: btn.id === currentCategory }"
                                :data-category="btn.id"
                                @click="switchCategory(btn.id)">
                                <i :class="btn.icon"></i>
                                {{ btn.name }}
                            </button>
                        </li>
                    </ul>
                </nav>
            </section>
        </header>
        <main class="main-content" role="main">
            <section class="container">
                <div v-if="loading" class="loading-indicator">
                    <div class="loading-spinner"></div>
                </div>
                <div v-if="error" class="error-message">{{ error }}</div>
                <div v-if="hasSearchKeyword && !loading && !error" class="search-results">
                    <div class="search-results-header">
                        <div class="results-info">
                            <i class="fas fa-search"></i>
                            <span>搜索结果</span>
                        </div>
                        <div class="search-query">{{ searchKeyword }}</div>
                        <div class="search-results-count">
                            找到 {{ filteredApis.length }} 个API
                        </div>
                        <button class="clear-search" @click="clearSearch">
                            <i class="fas fa-times"></i>
                            清空搜索
                        </button>
                    </div>
                </div>
                <div v-if="!loading && !error" class="apis-grid">
                    <div 
                        v-for="api in filteredApis" 
                        :key="api.id"
                        class="api-card" 
                        :data-category="api.category">
                        <div class="api-header">
                            <div class="api-title-row">
                                <h3 class="api-name" :title="api.name">{{ api.name }}</h3>
                                <span class="api-method" :class="'method-' + api.method.toLowerCase()" @click="filterByMethod(api.method)">{{ api.method }}</span>
                            </div>
                            <div class="api-path" :title="api.path">{{ api.path }}</div>
                            <p class="api-description" :title="api.description">{{ api.description }}</p>
                        </div>
                        <div class="api-tags">
                            <span v-for="(tag, idx) in api.tags.slice(0, 3)" :key="tag" class="tag" :class="{ active: selectedTags.includes(tag) }" @click="toggleTag(tag)">{{ tag }}</span>
                            <span v-if="api.tags.length > 3" class="tag tag-more" :title="api.tags.join(', ')">…</span>
                        </div>
                        <div v-if="api.examples && api.examples.length > 0" class="api-examples">
                            <h4 class="examples-title">
                                <i class="fas fa-code"></i>
                                使用示例
                            </h4>
                            <div class="examples-list">
                                <div v-for="(example, index) in api.examples" :key="index" class="example-item">
                                    <div class="example-header">
                                        <span class="example-number">#{{ index + 1 }}</span>
                                        <p class="example-description">{{ example.description }}</p>
                                        <button class="copy-example-btn" @click="copyExample(example.command)" title="复制示例">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <div class="example-content">
                                        <code class="example-code">{{ example.command }}</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="api-footer">
                            <span class="api-category">{{ api.category }}</span>
                        </div>
                    </div>
                </div>
                <div v-if="!loading && !error && filteredApis.length === 0" class="empty-state">
                    <i class="fas fa-network-wired"></i>
                    <p>暂无API数据</p>
                </div>
            </section>
            <!-- 插件区域：API测试器 -->
            <section id="api-tester-plugin"></section>
        </main>
    </div>
    <section id="global-loading-indicator" class="loading-indicator" aria-hidden="true" aria-label="全局加载中">
        <div class="loading-spinner" role="status" aria-live="polite" aria-label="正在加载"></div>
    </section>
    <section id="error-message" class="error-message" role="alert" aria-live="assertive" hidden></section>
    <section id="notifications" class="notifications-container" role="region" aria-label="通知区域"></section>
    <script type="module" src="/views/apis/index.js" defer></script>
    <script type="module" src="/utils/performance.js"></script>
    <script type="module" src="/utils/loading.js"></script>
</body>
</html> 
