<!-- Tag统计面板 -->
<div class="tag-statistics-panel" v-if="showTagStats">
    <div class="tag-stats-header">
        <h3 class="tag-stats-title">
            <i class="fas fa-chart-pie" aria-hidden="true"></i>
            标签统计
        </h3>
        <button 
            class="close-stats-btn"
            @click="closeTagStats"
            title="关闭统计面板"
            aria-label="关闭统计面板"
        >
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
    </div>
    
    <div class="tag-stats-content">
        <!-- 总体统计 -->
        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-number">{{ tagStats.totalTags }}</div>
                <div class="stat-label">总标签数</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ tagStats.totalConnections }}</div>
                <div class="stat-label">关联关系</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ tagStats.totalUsage }}</div>
                <div class="stat-label">总使用次数</div>
            </div>
        </div>
        
        <!-- 最常用标签 -->
        <div class="stats-section">
            <h4 class="section-title">
                <i class="fas fa-star" aria-hidden="true"></i>
                最常用标签
            </h4>
            <div class="tag-list">
                <div 
                    v-for="tag in tagStats.mostUsedTags" 
                    :key="tag.name"
                    class="tag-stat-item"
                    @click="filterByTag(tag.name)"
                >
                    <span class="tag-name">{{ tag.name }}</span>
                    <span class="tag-count">{{ tag.count }}</span>
                </div>
            </div>
        </div>
        
        <!-- 最近使用标签 -->
        <div class="stats-section">
            <h4 class="section-title">
                <i class="fas fa-clock" aria-hidden="true"></i>
                最近使用标签
            </h4>
            <div class="tag-list">
                <div 
                    v-for="tag in tagStats.recentTags" 
                    :key="tag.name"
                    class="tag-stat-item"
                    @click="filterByTag(tag.name)"
                >
                    <span class="tag-name">{{ tag.name }}</span>
                    <span class="tag-time">{{ formatTime(tag.lastUsed) }}</span>
                </div>
            </div>
        </div>
        
        <!-- 标签关联 -->
        <div class="stats-section">
            <h4 class="section-title">
                <i class="fas fa-project-diagram" aria-hidden="true"></i>
                标签关联
            </h4>
            <div class="tag-list">
                <div 
                    v-for="tag in tagStats.tagConnections" 
                    :key="tag.tag"
                    class="tag-stat-item"
                    @click="filterByTag(tag.tag)"
                >
                    <span class="tag-name">{{ tag.tag }}</span>
                    <span class="tag-connections">{{ tag.connections }} 关联</span>
                </div>
            </div>
        </div>
        
        <!-- 操作按钮 -->
        <div class="stats-actions">
            <button 
                class="action-btn export-btn"
                @click="exportTagData"
                title="导出标签数据"
            >
                <i class="fas fa-download" aria-hidden="true"></i>
                导出数据
            </button>
            <button 
                class="action-btn import-btn"
                @click="importTagData"
                title="导入标签数据"
            >
                <i class="fas fa-upload" aria-hidden="true"></i>
                导入数据
            </button>
            <button 
                class="action-btn cleanup-btn"
                @click="cleanupTagData"
                title="清理过期数据"
            >
                <i class="fas fa-broom" aria-hidden="true"></i>
                清理数据
            </button>
        </div>
    </div>
</div>

<!-- 标签搜索建议 -->
<div class="tag-suggestions" v-if="showSuggestions && tagSuggestions.length > 0">
    <div class="suggestions-header">
        <span class="suggestions-title">标签建议</span>
        <button 
            class="close-suggestions-btn"
            @click="closeSuggestions"
            title="关闭建议"
            aria-label="关闭建议"
        >
            <i class="fas fa-times" aria-hidden="true"></i>
        </button>
    </div>
    <div class="suggestions-list">
        <div 
            v-for="suggestion in tagSuggestions" 
            :key="suggestion.name"
            class="suggestion-item"
            :class="{ 'related': suggestion.type === 'related' }"
            @click="selectSuggestion(suggestion)"
        >
            <span class="suggestion-name">{{ suggestion.name }}</span>
            <span class="suggestion-meta">
                <span v-if="suggestion.type === 'related'" class="connection-strength">
                    关联强度: {{ Math.round(suggestion.connectionStrength * 100) }}%
                </span>
                <span class="usage-count">{{ suggestion.usageCount }} 次使用</span>
            </span>
        </div>
    </div>
</div>

