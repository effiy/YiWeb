<base-modal
    :visible="sessionContextEditorVisible"
    wrapper-class="aicr-session-context-modal"
    mask-class="aicr-session-context-modal-mask"
    body-class="aicr-session-context-modal-body"
    aria-label="页面上下文编辑器"
    @close="closeSessionContextEditor"
>
        <div class="aicr-session-context-modal-header">
            <div class="aicr-session-context-modal-title">
                页面上下文
                <span class="aicr-session-context-modal-subtitle">（Markdown）</span>
            </div>
            <div class="aicr-session-context-modal-header-right">
                <div class="aicr-session-context-mode-group" role="tablist" aria-label="上下文视图切换">
                    <button type="button" class="aicr-session-context-mode-btn"
                        :class="{ active: sessionContextMode === 'split' }"
                        @click="setSessionContextMode('split')" role="tab"
                        :aria-selected="sessionContextMode === 'split'" aria-label="并排模式" title="并排模式">▦</button>
                    <button type="button" class="aicr-session-context-mode-btn"
                        :class="{ active: sessionContextMode === 'edit' }"
                        @click="setSessionContextMode('edit')" role="tab"
                        :aria-selected="sessionContextMode === 'edit'" aria-label="仅编辑模式" title="仅编辑模式">✏️</button>
                    <button type="button" class="aicr-session-context-mode-btn"
                        :class="{ active: sessionContextMode === 'preview' }"
                        @click="setSessionContextMode('preview')" role="tab"
                        :aria-selected="sessionContextMode === 'preview'"
                        aria-label="仅预览模式" title="仅预览模式">👁️</button>
                </div>
                <button type="button" class="aicr-session-context-toolbar-btn"
                    :disabled="isSessionContextActionBusy()" @click="optimizeSessionContextDraft"
                    :title="sessionContextOptimizeButtonTitle()" aria-label="智能优化上下文内容">{{
                    sessionContextOptimizeButtonLabel() }}</button>
                <button type="button" class="aicr-session-context-toolbar-btn"
                    :disabled="isSessionContextActionBusy()" @click="translateSessionContextDraft('zh')"
                    title="翻译成中文" aria-label="翻译成中文">{{ sessionContextTranslateButtonLabel('zh') }}</button>
                <button type="button" class="aicr-session-context-toolbar-btn"
                    :disabled="isSessionContextActionBusy()" @click="translateSessionContextDraft('en')"
                    title="翻译成英文" aria-label="翻译成英文">{{ sessionContextTranslateButtonLabel('en') }}</button>
                <button type="button" class="aicr-session-context-toolbar-btn"
                    :disabled="isSessionContextActionBusy()" @click="copySessionContextDraft" title="复制内容"
                    aria-label="复制内容">📋</button>
                <button type="button" class="aicr-session-context-toolbar-btn"
                    :disabled="isSessionContextActionBusy()" @click="saveSessionContext"
                    :title="sessionContextSaveButtonTitle()" aria-label="保存修改">{{
                    sessionContextSaveButtonLabel() }}</button>
                <button type="button" class="aicr-session-context-toolbar-btn"
                    :disabled="isSessionContextActionBusy()" @click="downloadSessionContextDraft"
                    title="下载当前上下文为 Markdown (.md)" aria-label="下载当前上下文为 Markdown (.md)">⬇️</button>
                <button type="button" class="aicr-session-context-modal-close"
                    @click="closeSessionContextEditor" title="关闭 (Esc)" aria-label="关闭">✕</button>
            </div>
        </div>
        <div class="aicr-session-context-modal-content">
            <div class="aicr-session-context-editor-body" :data-mode="sessionContextMode">
                <div v-if="sessionContextMode === 'split'" class="aicr-session-context-split">
                    <textarea class="aicr-session-context-textarea" :value="sessionContextDraft"
                        @input="setSessionContextDraft($event.target.value)"
                        @paste="onSessionContextPaste"
                        aria-label="页面上下文内容"></textarea>
                    <markdown-view class="aicr-session-context-preview md-preview-body"
                        mode="markdown"
                        :content="sessionContextDraft"
                        aria-label="页面上下文预览"></markdown-view>
                </div>
                <textarea v-else-if="sessionContextMode === 'edit'"
                    class="aicr-session-context-textarea" :value="sessionContextDraft"
                    @input="setSessionContextDraft($event.target.value)"
                    @paste="onSessionContextPaste"
                    aria-label="页面上下文内容"></textarea>
                <markdown-view v-else class="aicr-session-context-preview md-preview-body"
                    mode="markdown"
                    :content="sessionContextDraft" aria-label="页面上下文预览"></markdown-view>
            </div>
        </div>
</base-modal>

<base-modal
    :visible="sessionMessageEditorVisible"
    wrapper-class="aicr-session-context-modal"
    mask-class="aicr-session-context-modal-mask"
    body-class="aicr-session-context-modal-body"
    aria-label="消息编辑器"
    :body-tabindex="0"
    @close="closeSessionMessageEditor"
>
        <div class="aicr-session-context-modal-header">
            <div class="aicr-session-context-modal-title">
                编辑消息
                <span class="aicr-session-context-modal-subtitle">（Markdown）</span>
            </div>
            <div class="aicr-session-context-modal-header-right">
                <div class="aicr-session-context-mode-group" role="tablist" aria-label="消息视图切换">
                    <button type="button" class="aicr-session-context-mode-btn"
                        :class="{ active: sessionMessageEditorMode === 'split' }"
                        @click="setSessionMessageEditorMode('split')" role="tab"
                        :aria-selected="sessionMessageEditorMode === 'split'" aria-label="并排">并排</button>
                    <button type="button" class="aicr-session-context-mode-btn"
                        :class="{ active: sessionMessageEditorMode === 'edit' }"
                        @click="setSessionMessageEditorMode('edit')" role="tab"
                        :aria-selected="sessionMessageEditorMode === 'edit'" aria-label="仅编辑">仅编辑</button>
                    <button type="button" class="aicr-session-context-mode-btn"
                        :class="{ active: sessionMessageEditorMode === 'preview' }"
                        @click="setSessionMessageEditorMode('preview')" role="tab"
                        :aria-selected="sessionMessageEditorMode === 'preview'"
                        aria-label="仅预览">仅预览</button>
                </div>
                <button type="button" class="aicr-session-context-toolbar-btn primary"
                    @click="saveSessionMessageEdit" title="保存修改" aria-label="保存修改">保存</button>
                <button type="button" class="aicr-session-context-modal-close"
                    @click="closeSessionMessageEditor" aria-label="关闭">✕</button>
            </div>
        </div>
        <div class="aicr-session-context-modal-content">
            <div class="aicr-session-context-editor-body" :data-mode="sessionMessageEditorMode">
                <div v-if="sessionMessageEditorMode === 'split'" class="aicr-session-context-split">
                    <textarea class="aicr-session-context-textarea" :value="sessionMessageEditorDraft"
                        @input="setSessionMessageEditorDraft($event.target.value)"
                        aria-label="消息内容"></textarea>
                    <markdown-view class="aicr-session-context-preview md-preview-body"
                        mode="markdown"
                        :content="sessionMessageEditorDraft"
                        aria-label="消息预览"></markdown-view>
                </div>
                <textarea v-else-if="sessionMessageEditorMode === 'edit'"
                    class="aicr-session-context-textarea" :value="sessionMessageEditorDraft"
                    @input="setSessionMessageEditorDraft($event.target.value)"
                    aria-label="消息内容"></textarea>
                <markdown-view v-else class="aicr-session-context-preview md-preview-body"
                    mode="markdown"
                    :content="sessionMessageEditorDraft" aria-label="消息预览"></markdown-view>
            </div>
        </div>
</base-modal>

<base-modal
    :visible="sessionFaqVisible"
    wrapper-class="aicr-session-context-modal"
    mask-class="aicr-session-context-modal-mask"
    body-class="aicr-session-context-modal-body aicr-session-faq-modal-body"
    aria-label="常见问题"
    :body-tabindex="0"
    @close="closeSessionFaq"
>
        <div class="aicr-session-context-modal-header">
            <div class="aicr-session-context-modal-title">
                💡 常见问题
                <span class="aicr-session-context-modal-subtitle">（一键插入/发送）</span>
            </div>
            <div class="aicr-session-context-modal-header-right">
                <base-button unstyled type="button" class-name="aicr-session-context-modal-close"
                    @click="closeSessionFaq" aria-label="关闭">✕</base-button>
            </div>
        </div>
        <div class="aicr-session-context-modal-content aicr-session-faq-modal-content">
            <div class="aicr-session-faq-layout">
                <div class="aicr-session-faq-sidebar" aria-label="筛选与标签">
                    <div class="aicr-session-faq-search-row">
                        <input type="text" class="aicr-session-faq-search-input"
                            :value="sessionFaqSearchKeyword"
                            @input="sessionFaqSearchKeyword = $event.target.value"
                            placeholder="搜索常见问题..." aria-label="搜索常见问题" />
                        <base-button unstyled type="button" class-name="aicr-session-faq-search-clear"
                            :disabled="!String(sessionFaqSearchKeyword || '').trim()"
                            @click="clearSessionFaqSearch" aria-label="清除搜索"
                            title="清除搜索">清除</base-button>
                    </div>

                    <div class="aicr-session-faq-filter-row" aria-label="常见问题标签筛选">
                        <div class="aicr-session-faq-filter-actions">
                            <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                :active="!!sessionFaqTagFilterReverse"
                                @click="toggleSessionFaqTagReverse" aria-label="反选"
                                title="不包含选中标签">反选</base-button>
                            <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                :active="!!sessionFaqTagFilterNoTags"
                                @click="toggleSessionFaqNoTags" aria-label="无标签"
                                title="只显示无标签问题">无标签</base-button>
                            <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                :disabled="(sessionFaqSelectedTags || []).length === 0 && !sessionFaqTagFilterReverse && !sessionFaqTagFilterNoTags"
                                @click="clearSessionFaqTagFilters" aria-label="清除标签筛选"
                                title="清除标签筛选">清除标签</base-button>
                            <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                :active="!!sessionFaqTagManagerVisible"
                                @click="toggleSessionFaqTagManager" aria-label="标签管理"
                                title="标签管理">标签管理</base-button>
                            <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                :disabled="!!sessionFaqLoading" @click="refreshSessionFaqs"
                                aria-label="刷新" title="从接口刷新">刷新</base-button>
                        </div>

                        <div class="aicr-session-faq-tag-search">
                            <input type="text" class="aicr-session-faq-tag-search-input"
                                :value="sessionFaqTagFilterSearchKeyword"
                                @input="sessionFaqTagFilterSearchKeyword = $event.target.value"
                                placeholder="搜索标签..." aria-label="搜索标签" />
                            <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                :disabled="!String(sessionFaqTagFilterSearchKeyword || '').trim()"
                                @click="clearSessionFaqTagSearch" aria-label="清除标签搜索"
                                title="清除标签搜索">清除</base-button>
                        </div>

                        <div class="aicr-session-faq-tag-list" role="list" aria-label="标签列表">
                            <base-tag v-for="tag in (sessionFaqVisibleTags || [])" :key="tag"
                                as="button" unstyled class-name="aicr-session-faq-tag"
                                :active="(sessionFaqSelectedTags || []).includes(tag)"
                                @click="toggleSessionFaqTag(tag)" role="listitem"
                                :aria-label="`筛选标签：${tag}`">{{ tag }}</base-tag>
                            <base-tag
                                v-if="(sessionFaqAllTags || []).length > (sessionFaqVisibleTags || []).length"
                                as="button" unstyled class-name="aicr-session-faq-tag more"
                                @click="toggleSessionFaqTagExpanded" role="listitem"
                                aria-label="展开或收起标签">{{ sessionFaqTagFilterExpanded ? '收起' : '更多'
                                }}</base-tag>
                        </div>

                        <div v-if="sessionFaqTagManagerVisible" class="aicr-session-faq-tag-manager"
                            aria-label="标签管理面板">
                            <div class="aicr-session-faq-tag-manager-header">
                                <div class="aicr-session-faq-tag-manager-title">标签管理</div>
                                <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                    @click="toggleSessionFaqTagManager"
                                    aria-label="关闭标签管理">关闭</base-button>
                            </div>
                            <div class="aicr-session-faq-tag-manager-list" role="list"
                                aria-label="可管理标签列表">
                                <div v-for="tag in (sessionFaqAllTags || [])" :key="`mgr_${tag}`"
                                    class="aicr-session-faq-tag-manager-item" role="listitem">
                                    <div class="aicr-session-faq-tag-manager-name">{{ tag }}</div>
                                    <div class="aicr-session-faq-tag-manager-actions">
                                        <base-button unstyled type="button" class-name="aicr-session-faq-filter-btn"
                                            :disabled="!!sessionFaqLoading"
                                            @click="renameSessionFaqTag(tag)"
                                            aria-label="重命名标签">重命名</base-button>
                                        <base-button unstyled type="button"
                                            class-name="aicr-session-faq-filter-btn danger"
                                            :disabled="!!sessionFaqLoading"
                                            @click="deleteSessionFaqTag(tag)"
                                            aria-label="删除标签">删除</base-button>
                                    </div>
                                </div>
                                <div v-if="(sessionFaqAllTags || []).length === 0"
                                    class="aicr-session-faq-tag-manager-empty">暂无标签</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="aicr-session-faq-main" aria-label="常见问题列表">
                    <div class="aicr-session-faq-summary" role="status" aria-label="筛选结果">
                        共 {{ (sessionFaqItems || []).length }} 条，匹配 {{ (filteredSessionFaqItems ||
                        []).length }} 条
                    </div>

                    <div class="aicr-session-faq-input-row" aria-label="添加常见问题">
                        <textarea class="aicr-session-faq-input"
                            placeholder="输入问题内容，按 Ctrl+Enter 或 Shift+Enter 添加"
                            @keydown.ctrl.enter.prevent="addSessionFaqFromInput"
                            @keydown.meta.enter.prevent="addSessionFaqFromInput"
                            @keydown.shift.enter.prevent="addSessionFaqFromInput"
                            aria-label="新增常见问题"></textarea>
                        <div class="aicr-session-faq-input-hint">支持多行内容，首行作为标题，余下作为正文。</div>
                    </div>

                    <div v-if="sessionFaqLoading" class="aicr-session-faq-status" role="status">
                        正在加载常见问题...</div>
                    <div v-else-if="sessionFaqError" class="aicr-session-faq-error" role="status">{{
                        sessionFaqError }}</div>

                    <div class="aicr-session-faq-list" role="list" aria-label="常见问题列表">
                        <div v-for="item in (filteredSessionFaqItems || [])" :key="item.key"
                            class="aicr-session-faq-item" role="listitem" tabindex="0"
                            @click="applySessionFaqItem(item, 'insert'); closeSessionFaq()"
                            @keydown.enter.exact.prevent="applySessionFaqItem(item, 'insert'); closeSessionFaq()"
                            @keydown.ctrl.enter.prevent="applySessionFaqItem(item, 'send'); closeSessionFaq()"
                            @keydown.meta.enter.prevent="applySessionFaqItem(item, 'send'); closeSessionFaq()">
                            <div class="aicr-session-faq-item-title-row">
                                <div class="aicr-session-faq-item-title">{{ item.title }}</div>
                            </div>
                            <div class="aicr-session-faq-item-prompt">{{ item.prompt }}</div>
                            <div class="aicr-session-faq-item-meta-row">
                                <div v-if="Array.isArray(item.tags) && item.tags.length > 0"
                                    class="aicr-session-faq-item-tags" aria-label="问题标签">
                                    <button v-for="tag in item.tags" :key="`${item.key}_${tag}`"
                                        type="button" class="aicr-session-faq-item-tag"
                                        @click.stop="toggleSessionFaqTag(tag)"
                                        :aria-label="`筛选标签：${tag}`">{{ tag }}</button>
                                </div>
                                <div class="aicr-session-faq-item-actions">
                                    <button type="button" class="aicr-session-faq-item-btn"
                                        @click.stop="editSessionFaqTags(item)"
                                        :disabled="!!sessionFaqLoading"
                                        aria-label="标签">标签</button>
                                    <button type="button" class="aicr-session-faq-item-btn"
                                        @click.stop="copySessionFaqItem(item)"
                                        :disabled="!!sessionFaqLoading"
                                        aria-label="复制">复制</button>
                                    <button type="button" class="aicr-session-faq-item-btn"
                                        @click.stop="applySessionFaqItem(item, 'insert'); closeSessionFaq()"
                                        :disabled="!!sessionFaqLoading"
                                        aria-label="插入">插入</button>
                                    <button type="button" class="aicr-session-faq-item-btn primary"
                                        @click.stop="applySessionFaqItem(item, 'send'); closeSessionFaq()"
                                        :disabled="!!sessionFaqLoading"
                                        aria-label="发送">发送</button>
                                    <button type="button" class="aicr-session-faq-item-btn danger"
                                        @click.stop="deleteSessionFaqItem(item)"
                                        :disabled="!!sessionFaqLoading || !!(sessionFaqDeletingMap && sessionFaqDeletingMap[item.key])"
                                        aria-label="删除">{{ (sessionFaqDeletingMap && sessionFaqDeletingMap[item.key]) ? '删除中...' : '删除' }}</button>
                                </div>
                            </div>
                        </div>

                        <div v-if="!sessionFaqLoading && (filteredSessionFaqItems || []).length === 0"
                            class="aicr-session-faq-empty" role="listitem">
                            未找到匹配的常见问题
                        </div>
                    </div>
                </div>
            </div>
        </div>
</base-modal>

<base-modal
    :visible="sessionSettingsVisible"
    wrapper-class="aicr-session-context-modal"
    mask-class="aicr-session-context-modal-mask"
    body-class="aicr-session-context-modal-body aicr-session-settings-modal-body"
    aria-label="AI 设置"
    :body-tabindex="0"
    @close="closeSessionSettings"
>
        <div class="aicr-session-context-modal-header">
            <div class="aicr-session-context-modal-title">
                ⚙️ AI 设置
                <span class="aicr-session-context-modal-subtitle">（当前浏览器本地）</span>
            </div>
            <div class="aicr-session-context-modal-header-right">
                <button type="button" class="aicr-session-context-toolbar-btn"
                    @click="restoreSessionSettingsDefaults" aria-label="恢复默认"
                    title="恢复默认">恢复默认</button>
                <button type="button" class="aicr-session-context-toolbar-btn primary"
                    @click="saveSessionSettings" aria-label="保存" title="保存">保存</button>
                <button type="button" class="aicr-session-context-modal-close"
                    @click="closeSessionSettings" aria-label="关闭">✕</button>
            </div>
        </div>
        <div class="aicr-session-context-modal-content aicr-session-settings-modal-content">
            <div class="aicr-session-settings-field">
                <label class="aicr-session-settings-label"
                    for="aicr-session-bot-model">模型（可选）</label>
                <input id="aicr-session-bot-model" type="text" class="aicr-session-settings-input"
                    :value="sessionBotModelDraft"
                    @input="sessionBotModelDraft = $event.target.value" placeholder="例如：gpt-4o-mini"
                    autocomplete="off" spellcheck="false" aria-label="模型" />
                <div class="aicr-session-settings-hint">留空表示使用服务端默认模型。</div>
            </div>

            <div class="aicr-session-settings-field">
                <label class="aicr-session-settings-label"
                    for="aicr-session-system-prompt">系统提示词</label>
                <textarea id="aicr-session-system-prompt" class="aicr-session-settings-textarea"
                    :value="sessionBotSystemPromptDraft"
                    @input="sessionBotSystemPromptDraft = $event.target.value" rows="10"
                    aria-label="系统提示词"></textarea>
            </div>
        </div>
</base-modal>

<base-modal
    :visible="weChatSettingsVisible"
    wrapper-class="aicr-session-context-modal"
    mask-class="aicr-session-context-modal-mask"
    body-class="aicr-session-context-modal-body aicr-session-settings-modal-body"
    aria-label="微信机器人设置"
    :body-tabindex="0"
    @close="closeWeChatSettings"
>
        <div class="aicr-session-context-modal-header">
            <div class="aicr-session-context-modal-title">
                🤖 微信机器人
                <span class="aicr-session-context-modal-subtitle">（当前浏览器本地）</span>
            </div>
            <div class="aicr-session-context-modal-header-right">
                <button type="button" class="aicr-session-context-toolbar-btn"
                    @click="restoreWeChatSettingsDefaults" aria-label="恢复默认"
                    title="恢复默认">恢复默认</button>
                <button type="button" class="aicr-session-context-toolbar-btn primary"
                    @click="saveWeChatSettings" aria-label="保存" title="保存">保存</button>
                <button type="button" class="aicr-session-context-modal-close"
                    @click="closeWeChatSettings" aria-label="关闭">✕</button>
            </div>
        </div>
        <div class="aicr-session-context-modal-content aicr-session-settings-modal-content">
            <div class="aicr-session-settings-field">
                <button type="button" class="aicr-session-context-toolbar-btn"
                    @click="addWeChatRobotDraft" aria-label="新增机器人" title="新增机器人">新增机器人</button>
            </div>
            <div class="aicr-session-settings-field">
                <div v-for="(bot, ri) in (weChatRobotsDraft || [])" :key="bot.id || ('wr_' + ri)">
                    <div class="aicr-session-settings-field">
                        <label class="aicr-session-settings-label">名称</label>
                        <input type="text" class="aicr-session-settings-input" :value="bot.name"
                            @input="weChatRobotsDraft[ri].name = $event.target.value"
                            placeholder="机器人名称" autocomplete="off" spellcheck="false"
                            aria-label="机器人名称" />
                    </div>
                    <div class="aicr-session-settings-field">
                        <label class="aicr-session-settings-label">Webhook URL</label>
                        <input type="text" class="aicr-session-settings-input" :value="bot.webhook"
                            @input="weChatRobotsDraft[ri].webhook = $event.target.value"
                            placeholder="企业微信机器人Webhook" autocomplete="off" spellcheck="false"
                            aria-label="Webhook" />
                    </div>
                    <div class="aicr-session-settings-field">
                        <label class="aicr-session-settings-label">启用</label>
                        <input type="checkbox" :checked="!!bot.enabled"
                            @change="weChatRobotsDraft[ri].enabled = $event.target.checked"
                            aria-label="启用机器人" />
                    </div>
                    <div class="aicr-session-settings-field">
                        <label class="aicr-session-settings-label">自动转发助手回复</label>
                        <input type="checkbox" :checked="!!bot.autoForward"
                            @change="weChatRobotsDraft[ri].autoForward = $event.target.checked"
                            aria-label="自动转发助手回复" />
                    </div>
                    <div class="aicr-session-settings-field">
                        <button type="button" class="aicr-session-context-toolbar-btn"
                            @click="removeWeChatRobotDraft(ri)" aria-label="删除机器人"
                            title="删除机器人">删除</button>
                    </div>
                    <hr />
                </div>
            </div>
        </div>
</base-modal>

<base-modal
    :visible="sessionEditVisible"
    wrapper-class="aicr-session-context-modal"
    mask-class="aicr-session-context-modal-mask"
    body-class="aicr-session-context-modal-body aicr-session-settings-modal-body"
    aria-label="编辑会话"
    :body-tabindex="0"
    @close="closeSessionEdit"
>
        <div class="aicr-session-context-modal-header">
            <div class="aicr-session-context-modal-title">
                ✏️ 编辑会话
            </div>
            <div class="aicr-session-context-modal-header-right">
                <button type="button" class="aicr-session-context-toolbar-btn primary"
                    @click="saveSessionEdit" aria-label="保存" title="保存">保存</button>
                <button type="button" class="aicr-session-context-modal-close"
                    @click="closeSessionEdit" aria-label="关闭">✕</button>
            </div>
        </div>
        <div class="aicr-session-context-modal-content aicr-session-settings-modal-content">
            <div class="aicr-session-settings-field">
                <label class="aicr-session-settings-label" for="session-edit-title">标题</label>
                <input id="session-edit-title" type="text" class="aicr-session-settings-input"
                    :value="sessionEditTitle"
                    @input="sessionEditTitle = $event.target.value"
                    placeholder="请输入会话标题" autocomplete="off" spellcheck="false"
                    aria-label="会话标题" />
            </div>
            <div class="aicr-session-settings-field">
                <label class="aicr-session-settings-label" for="session-edit-url">网址</label>
                <input id="session-edit-url" type="url" class="aicr-session-settings-input"
                    :value="sessionEditUrl"
                    @input="sessionEditUrl = $event.target.value"
                    placeholder="请输入网址（可选）" autocomplete="off" spellcheck="false"
                    aria-label="会话网址" />
                <div class="aicr-session-settings-hint">网址将显示在欢迎卡片中</div>
            </div>
            <div class="aicr-session-settings-field">
                <div class="aicr-session-edit-description-header">
                    <label class="aicr-session-settings-label" for="session-edit-description">描述</label>
                    <button type="button" class="aicr-session-context-toolbar-btn"
                        :disabled="sessionEditGenerating"
                        @click.stop="generateSessionDescription" aria-label="AI生成描述"
                        title="根据页面上下文内容AI智能生成描述">
                        <span v-if="sessionEditGenerating">生成中...</span>
                        <span v-else>✨ AI生成</span>
                    </button>
                </div>
                <textarea id="session-edit-description" class="aicr-session-settings-textarea"
                    :value="sessionEditDescription"
                    @input="sessionEditDescription = $event.target.value"
                    rows="6" placeholder="请输入会话描述，或点击AI生成按钮自动生成"
                    aria-label="会话描述"></textarea>
                <div class="aicr-session-settings-hint">描述将帮助您更好地理解和管理会话内容</div>
            </div>
        </div>
</base-modal>
