<!-- 每日清单组件模板 -->
<div class="daily-checklist-container" v-show="activeCategory === 'dailyChecklist' || activeCategory === 'all'">
        <!-- 头部操作区域 -->
        <div class="checklist-header">
            <div class="header-left">
                <h2 class="checklist-title">
                    <i class="fas fa-tasks" aria-hidden="true"></i>
                    每日清单 - {{ currentDateDisplay }}
                </h2>
                <p class="checklist-subtitle">{{ currentDateSubtitle }}</p>
            </div>
            <div class="header-actions">
                <button 
                    @click="handleAddItem"
                    class="add-item-btn"
                    type="button"
                    title="添加新项目"
                    aria-label="添加新项目">
                    <i class="fas fa-plus" aria-hidden="true"></i>
                    <span>添加项目</span>
                </button>
                <button 
                    @click="handleRefresh"
                    class="refresh-btn"
                    type="button"
                    title="刷新数据"
                    aria-label="刷新数据">
                    <i class="fas fa-sync-alt" aria-hidden="true"></i>
                </button>
            </div>
        </div>

        <!-- 加载状态 -->
        <div v-if="loading" class="loading-container">
            <div class="loading-spinner"></div>
            <p>正在加载每日清单...</p>
        </div>

        <!-- 错误状态 -->
        <div v-else-if="error" class="error-container">
            <p>{{ error }}</p>
            <button type="button" @click="handleRefresh" class="retry-btn">重试</button>
        </div>

        <!-- 清单表格 -->
        <div v-else class="checklist-content">
            <div class="checklist-stats">
                <div class="stat-item">
                    <span class="stat-number">{{ completedCount }}</span>
                    <span class="stat-label">已完成</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ totalCount }}</span>
                    <span class="stat-label">总项目</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">{{ Math.round(completionRate) }}%</span>
                    <span class="stat-label">完成率</span>
                </div>
            </div>

            <!-- 时间表 -->
            <div class="time-schedule">
                <div 
                    v-for="(timeSlot, index) in timeSlots" 
                    :key="timeSlot.time"
                    class="time-slot"
                    :class="{ 'completed': timeSlot.completed, 'current': timeSlot.isCurrent }"
                >
                    <div class="time-header">
                        <div class="time-info">
                            <span class="time-range">{{ timeSlot.time }}</span>
                            <span class="time-name">{{ timeSlot.name }}</span>
                        </div>
                        <div class="time-actions">
                            <button 
                                type="button"
                                @click="toggleTimeSlot(index)"
                                class="toggle-btn"
                                :class="{ 'completed': timeSlot.completed }"
                                :title="timeSlot.completed ? '标记为未完成' : '标记为完成'"
                                :aria-label="timeSlot.completed ? '标记为未完成' : '标记为完成'">
                                <i :class="timeSlot.completed ? 'fas fa-check-circle' : 'far fa-circle'"></i>
                            </button>
                            <button 
                                type="button"
                                @click="editTimeSlot(index)"
                                class="edit-btn"
                                title="编辑时段"
                                aria-label="编辑时段">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="time-content">
                        <div class="main-activity">
                            <h4>{{ timeSlot.mainActivity }}</h4>
                        </div>
                        
                        <div class="checklist-items">
                            <div 
                                v-for="(item, itemIndex) in timeSlot.checklist" 
                                :key="itemIndex"
                                class="checklist-item"
                                :class="{ 'completed': item.completed }"
                            >
                                <label class="item-label">
                                    <input 
                                        type="checkbox" 
                                        v-model="item.completed"
                                        @change="updateItem(index, itemIndex)"
                                        class="item-checkbox"
                                        :aria-label="item.text">
                                    <span class="item-text">{{ item.text }}</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="data-tracking">
                            <h5>数据追踪</h5>
                            <div class="tracking-fields">
                                <div 
                                    v-for="(field, fieldIndex) in timeSlot.dataFields" 
                                    :key="fieldIndex"
                                    class="tracking-field"
                                >
                                    <label class="field-label">{{ field.label }}：</label>
                                    <input 
                                        type="text" 
                                        v-model="field.value"
                                        @blur="updateDataField(index, fieldIndex)"
                                        class="field-input"
                                        :placeholder="field.placeholder">
                                </div>
                            </div>
                        </div>
                        
                        <div class="phone-reminder">
                            <h5>手机提醒</h5>
                            <div class="reminder-content">
                                <i class="fas fa-mobile-alt" aria-hidden="true"></i>
                                <span>{{ timeSlot.phoneReminder }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 编辑弹窗 -->
        <div v-if="showEditModal" class="modal-overlay" @click="closeEditModal">
            <div class="modal-content" @click.stop>
                <div class="modal-header">
                    <h3>编辑时段</h3>
                    <button @click="closeEditModal" class="close-btn" type="button" title="关闭" aria-label="关闭">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>时段名称：</label>
                        <input 
                            type="text" 
                            v-model="editingSlot.name"
                            class="form-input">
                    </div>
                    <div class="form-group">
                        <label>主要活动：</label>
                        <input 
                            type="text" 
                            v-model="editingSlot.mainActivity"
                            class="form-input">
                    </div>
                    <div class="form-group">
                        <label>手机提醒：</label>
                        <input 
                            type="text" 
                            v-model="editingSlot.phoneReminder"
                            class="form-input">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" @click="closeEditModal" class="btn btn-secondary">取消</button>
                    <button type="button" @click="saveEdit" class="btn btn-primary">保存</button>
                </div>
            </div>
        </div>
    </div>

